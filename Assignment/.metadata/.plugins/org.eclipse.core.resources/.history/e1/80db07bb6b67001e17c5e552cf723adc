/*
 * uart.c
 *
 *  Created on: Oct 11, 2023
 *      Author: joshu
 */


#include "uart.h"

FILE* uart;
char* byte;

void setup_uart(){
	uart = open(UART_NAME,(O_NONBLOCK | O_RDWR));

	if(!uart){
		printf("Failed to open UART");
	} else {
		printf("UART Started");

	}

}

void check_uart(){

	char uartBuffer[10];
		int length = 0;
		length = read(uart, uartBuffer, sizeof(uartBuffer) - 1);

		printf("%s", uartBuffer);
		if(length > 0){
			for(int i = 0; i < length; i++){
				if(uartBuffer[i] == 'V'){
					printf(" --V--");
				}else if(uartBuffer[i] == 'A'){
					printf(" --A--");
				}
			}
		}
		/*
	if (read(uart,byte,1) > 0){
		if (*byte == 'A'){
			printf("ASense UART\n");
		}
		else if (*byte == 'V'){
			printf("VSense UART\n");
		}
		else{
			printf("Vn2\n");
		}
	}*/
}

void close_uart(){
	close(uart);
}

